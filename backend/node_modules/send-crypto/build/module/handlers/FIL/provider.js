// tslint:disable no-submodule-imports
import filecoin_signer from "@zondax/filecoin-signing-tools/js";
import { Network as FilNetwork, } from "@glif/filecoin-wallet-provider";
export const SingleKeyProvider = (privateKey) => {
    // here we close over the private variables, so they aren't accessible to the outside world
    const PRIVATE_KEY = privateKey;
    const { private_hexstring } = filecoin_signer.keyRecover(PRIVATE_KEY);
    return {
        getAccounts: async (_nStart, _nEnd, network = FilNetwork.MAIN) => {
            return [
                filecoin_signer.keyRecover(PRIVATE_KEY, network === FilNetwork.TEST).address,
            ];
        },
        sign: async (_from, filecoinMessage) => {
            const { signature } = filecoin_signer.transactionSign({
                to: filecoinMessage.To,
                from: filecoinMessage.From,
                nonce: filecoinMessage.Nonce,
                value: filecoinMessage.Value,
                gaslimit: filecoinMessage.GasLimit,
                gasfeecap: filecoinMessage.GasFeeCap,
                gaspremium: filecoinMessage.GasPremium,
                method: filecoinMessage.Method,
                params: filecoinMessage.Params || "",
            }, Buffer.from(private_hexstring, "hex").toString("base64"));
            return {
                Message: filecoinMessage,
                Signature: {
                    Type: 0,
                    Data: signature.data,
                },
            };
        },
    };
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvdmlkZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvaGFuZGxlcnMvRklML3Byb3ZpZGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLHNDQUFzQztBQUN0QyxPQUFPLGVBQWUsTUFBTSxtQ0FBbUMsQ0FBQztBQUNoRSxPQUFPLEVBQ0gsT0FBTyxJQUFJLFVBQVUsR0FFeEIsTUFBTSxnQ0FBZ0MsQ0FBQztBQUd4QyxNQUFNLENBQUMsTUFBTSxpQkFBaUIsR0FBRyxDQUM3QixVQUEyQixFQUNWLEVBQUU7SUFDbkIsMkZBQTJGO0lBQzNGLE1BQU0sV0FBVyxHQUFHLFVBQVUsQ0FBQztJQUMvQixNQUFNLEVBQUUsaUJBQWlCLEVBQUUsR0FBRyxlQUFlLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQ3RFLE9BQU87UUFDSCxXQUFXLEVBQUUsS0FBSyxFQUNkLE9BQWUsRUFDZixLQUFhLEVBQ2IsVUFBa0IsVUFBVSxDQUFDLElBQUksRUFDbkMsRUFBRTtZQUNBLE9BQU87Z0JBQ0gsZUFBZSxDQUFDLFVBQVUsQ0FDdEIsV0FBVyxFQUNYLE9BQU8sS0FBSyxVQUFVLENBQUMsSUFBSSxDQUM5QixDQUFDLE9BQU87YUFDWixDQUFDO1FBQ04sQ0FBQztRQUVELElBQUksRUFBRSxLQUFLLEVBQ1AsS0FBYSxFQUNiLGVBQTZCLEVBQ0YsRUFBRTtZQUM3QixNQUFNLEVBQUUsU0FBUyxFQUFFLEdBQUcsZUFBZSxDQUFDLGVBQWUsQ0FDakQ7Z0JBQ0ksRUFBRSxFQUFFLGVBQWUsQ0FBQyxFQUFFO2dCQUN0QixJQUFJLEVBQUUsZUFBZSxDQUFDLElBQUk7Z0JBQzFCLEtBQUssRUFBRSxlQUFlLENBQUMsS0FBSztnQkFDNUIsS0FBSyxFQUFFLGVBQWUsQ0FBQyxLQUFLO2dCQUM1QixRQUFRLEVBQUUsZUFBZSxDQUFDLFFBQVE7Z0JBQ2xDLFNBQVMsRUFBRSxlQUFlLENBQUMsU0FBUztnQkFDcEMsVUFBVSxFQUFFLGVBQWUsQ0FBQyxVQUFVO2dCQUN0QyxNQUFNLEVBQUUsZUFBZSxDQUFDLE1BQU07Z0JBQzlCLE1BQU0sRUFBRSxlQUFlLENBQUMsTUFBTSxJQUFJLEVBQUU7YUFDdkMsRUFDRCxNQUFNLENBQUMsSUFBSSxDQUFDLGlCQUFpQixFQUFFLEtBQUssQ0FBQyxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FDM0QsQ0FBQztZQUNGLE9BQU87Z0JBQ0gsT0FBTyxFQUFFLGVBQWU7Z0JBQ3hCLFNBQVMsRUFBRTtvQkFDUCxJQUFJLEVBQUUsQ0FBQztvQkFDUCxJQUFJLEVBQUUsU0FBUyxDQUFDLElBQUk7aUJBQ3ZCO2FBQ0osQ0FBQztRQUNOLENBQUM7S0FDSixDQUFDO0FBQ04sQ0FBQyxDQUFDIn0=